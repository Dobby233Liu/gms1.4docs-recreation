<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="keywords" content="online documentation, web online help, web help, chm2web" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<meta name="generator" content="chm2web Pro 2.85 (unicode)" />
<title>skeleton_bone_state_set</title>
<meta http-equiv="X-UA-Compatible" content="IE=9">
<link rel="stylesheet" href="../../../../style.css" type="text/css"
media="screen" title="style" charset="utf-8">
<link rel="stylesheet" href="../../../../../../files/helpindex.css"
type="text/css">

<script type="text/JavaScript" src="../../../../../../files/supply.js"></script>
<script type="text/JavaScript">
chmtop.c2wtopf.pageid = "dadiospice/002_reference/game assets/sprites/skeletal animations/skeleton_bone_state_set.html";
</script>

</head>
<body><script type="text/JavaScript"> 
if (window.name != "content") 
  document.write(" <table width=\"100%\" bgcolor=\"#e1e1e1\"cellspacing=\"2\" cellpadding=\"0\" style=\"border-collapse: collapse; font-family: sans-serif; font-size: 14px; color: #000000; text-decoration: none;  \"> <tr> <td align=\"center\" style=\"border-bottom: 2px solid gray\" > <br>&nbsp;Click <a href=\"../../../../../../index.html?page=source%2Fdadiospice%2F002_reference%2Fgame%20assets%2Fsprites%2Fskeletal%20animations%2Fskeleton_bone_state_set.html\">here</a> to show toolbars of the Web Online Help System: <a href=\"../../../../../../index.html?page=source%2Fdadiospice%2F002_reference%2Fgame%20assets%2Fsprites%2Fskeletal%20animations%2Fskeleton_bone_state_set.html\">show toolbars</a><br>&nbsp;</td></tr></table><br> "); 
</script>
<!-- !chm2web! -->

<h1 class="studio">skeleton_bone_state_set</h1>

<h2 class="studio">Permits you to modify the bone data used for the
current pose of the skeletal animation.</h2>

<h3 class="studio">Syntax:</h3>

<p class="code">skeleton_bone_state_set(bone, map);</p>

<p><br>
</p>

<div class="param">
<table>
<tr>
<th>Argument</th>
<th>Description</th>
</tr>

<tr>
<td>bone</td>
<td>The name (as a string) of the bone.</td>
</tr>

<tr class="alt">
<td>map</td>
<td>The (previously created) ds_map that stores the bone data.</td>
</tr>
</table>
</div>

<p><br>
</p>

<p><b>Returns:</b> N/A</p>

<p><br>
</p>

<h3 class="studio">Description</h3>

<p>Your skeletal animation is made up of a number of "bones", which
you will have defined and given names to in your animation program,
and this function can be used to set certain data for the named
bone at any time. Note that this data will set the <b>current</b>
pose for the skeleton, depending on the animation set used, and the
function requires a previously created <a href=
"../../../data%20structures/ds%20maps/index.html"><tt>ds_map</tt></a>,
which should have the following keys and their required values:</p>

<blockquote>
<ul>
<li><b>"x":</b> The local x position of the bone relative to the
parent bone.<br>
<br></li>

<li><b>"y":</b> The local y position of the bone relative to the
parent bone.<br>
<br></li>

<li><b>"angle":</b> The local rotation of the bone relative to the
parent bone.<br>
<br></li>

<li><b>"xscale":</b> The local horizontal scale of the bone.<br>
<br></li>

<li><b>"yscale":</b> The local vertical scale of the bone.<br>
<br></li>

<li><b>"parent":</b> The name (a string) of the parent bone.<br>
<br></li>
</ul>
</blockquote>

<p>This function is provided so that you can "intercept" animation
data and modify it before it is drawn on the screen, and as such
you would want to use it in the <a href=
"../../../../000_using%20gamemaker/events/other%20event.html">Animation
Update</a> event, since this event is triggered just before the
Draw Events.<br>
<br>
Note that you can use the same map you filled out using the
<a href="skeleton_bone_state_get.html"><tt>skeleton_bone_state_get</tt></a>
function, even though it contains the additional "World" keys and
values. Since these refer to <i>read-only</i> values, setting them
with this function will have no affect.</p>

<blockquote><i><b>IMPORTANT:</b> Spine integration in GameMaker:
Studio is a Pro licence feature and will not work in the
Free/Standard versions.</i>
</blockquote>

<p><br>
</p>

<h3 class="studio">Example:</h3>

<p class="code">var map = ds_map_create();<br>
skeleton_bone_state_get("head", map);<br>
var xx = ds_map_find_value(map, "worldX");<br>
var yy = ds_map_find_value(map, "worldY");<br>
var deltax = mouse_x - (x + xx);<br>
var deltay = mouse_y - (y + yy);<br>
var angle = arctan2(deltay, deltax);<br>
var angle = point_direction(xx, yy, mouse_x, mouse_y);<br>
ds_map_replace(map, "angle", -angle * 180 / pi);<br>
skeleton_bone_state_set("head", map);<br>
ds_map_clear(map);<br></p>

<p>The above code creates a ds_map and then populates it with the
data from the bone named "head". It then extracts the world
position for the bone, and uses that data to set the "angle" of the
bone to track the mouse position in the game.</p>

<p><br>
</p>

<div class="clear">
<div style="float:left">Back: <a href="index.html">Skeletal
Animations</a></div>

<div style="float:right">Next: <a href=
"skeleton_slot_data.html">skeleton_slot_data</a></div>
</div>

<h5>Â© Copyright YoYo Games Ltd. 2018 All Rights Reserved</h5>

<script type="text/JavaScript">
var fe = FindFrame("toc", top);
if ((fe != null) && (chmtop.c2wtopf.jstree != null)) {
  if (chmtop.c2wtopf.FITEMS[chmtop.c2wtopf.pagenum] != chmtop.c2wtopf.pageid)
    chmtop.c2wtopf.jstree.OpenTreeNode("source/" + chmtop.c2wtopf.pageid);
}
</script>
</body>
</html>
