<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta name="keywords" content="online documentation, web online help, web help, chm2web" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<meta name="generator" content="chm2web Pro 2.85 (unicode)" />
<title>steam_ugc_send_query</title>
<meta http-equiv="X-UA-Compatible" content="IE=9">
<link rel="stylesheet" href="../../../style.css" type="text/css"
media="screen" title="style" charset="utf-8">
<link rel="stylesheet" href="../../../../../files/helpindex.css"
type="text/css">

<script type="text/JavaScript" src="../../../../../files/supply.js"></script>
<script type="text/JavaScript">
chmtop.c2wtopf.pageid = "dadiospice/002_reference/steam api/user generated content/steam_ugc_send_query.html";
</script>

</head>
<body><script type="text/JavaScript"> 
if (window.name != "content") 
  document.write(" <table width=\"100%\" bgcolor=\"#e1e1e1\"cellspacing=\"2\" cellpadding=\"0\" style=\"border-collapse: collapse; font-family: sans-serif; font-size: 14px; color: #000000; text-decoration: none;  \"> <tr> <td align=\"center\" style=\"border-bottom: 2px solid gray\" > <br>&nbsp;Click <a href=\"../../../../../index.html?page=source%2Fdadiospice%2F002_reference%2Fsteam%20api%2Fuser%20generated%20content%2Fsteam_ugc_send_query.html\">here</a> to show toolbars of the Web Online Help System: <a href=\"../../../../../index.html?page=source%2Fdadiospice%2F002_reference%2Fsteam%20api%2Fuser%20generated%20content%2Fsteam_ugc_send_query.html\">show toolbars</a><br>&nbsp;</td></tr></table><br> "); 
</script>
<!-- !chm2web! -->

<h1 class="studio">steam_ugc_send_query</h1>

<h2 class="studio">Sets whether to check the local cache for the
query.</h2>

<h3 class="studio">Syntax:</h3>

<p class="code">steam_ugc_send_query(ugc_query_handle);</p>

<p><br>
</p>

<div class="param">
<table>
<tr>
<th>Argument</th>
<th>Description</th>
</tr>

<tr>
<td>ugc_query_handle</td>
<td>The query handle to send.</td>
</tr>
</table>
</div>

<p><br>
</p>

<p><b>Returns:</b> Boolean</p>

<p><br>
</p>

<h3 class="studio">Description</h3>

<p>This function can be used to send a query request. You first
define the query using the appropriate
<tt>steam_ugc_create_query_*()</tt> functions which will return a
"query Handle". This handle is then used to set filters etc....
before being used in this funtion to send off the query request.
The function returns a unique async ID value which can be used to
check the details correctly in the Steam Async event. This event
will have the <tt>async_load</tt> DS map which will be populated
with the following key/value pairs:</p>

<blockquote>
<ol>
<li>"<b>id</b>" - The async ID returned by the function that
triggered the event</li>

<li style="list-style: none"><br>
</li>

<li>"<b>result</b>" - The result of the operation (a real value).
This will either be the GML constant <tt>ugc_result_success</tt> or
some other real number. So you should check for this constant to
ensure that the call was successful, and if otherwise somthing has
not worked correctly. The rest of the possible values returned are
shown as the result of the Steam "EResult" value and you should see
<tt>steamclientpublic.h</tt> in the SDK headers for all 89 possible
values.</li>

<li style="list-style: none"><br>
</li>

<li>"<b>event_type</b>" - The string "<b>ugc_query</b>"</li>

<li style="list-style: none"><br>
</li>

<li>"<b>num_results</b>" - The number of results returned (max 50
)</li>

<li style="list-style: none"><br>
</li>

<li>"<b>total_matching</b>" - The total number of matching
results</li>

<li style="list-style: none"><br>
</li>

<li>"<b>cached_data</b>" - Indicates whether this data was
retrieved from the local on-disk cache or not (will be either
<tt>true</tt> or <tt>false</tt>)</li>

<li style="list-style: none"><br>
</li>

<li>"<b>results_list</b>" - A DS list index index, where each list
entry is a DS Map index containing details of the particular
item</li>
</ol>
</blockquote>

<p>When you get the async event type "ugc_query", you can then
parse the results list and extract the following information from
each of the DS maps (one map per item in the list):</p>

<blockquote>
<ol>
<li>"<b>published_file_id"</b>" -Holds the unique published file id
for the item</li>

<li style="list-style: none"><br>
</li>

<li>"<b>file_type</b>" - The type of file used</li>

<li style="list-style: none"><br>
</li>

<li>"<b>creator_app_id</b>" - The Steam ID of the item creator</li>

<li style="list-style: none"><br>
</li>

<li>"<b>consumer_app_id</b>" - The Steam ID of the item
consumer</li>

<li style="list-style: none"><br>
</li>

<li>"<b>title</b>" - The title of the item</li>

<li style="list-style: none"><br>
</li>

<li>"<b>description</b>" - The description of the item</li>

<li style="list-style: none"><br>
</li>

<li>"<b>steam_id_owner</b>" - The Steam ID of the item owner</li>

<li style="list-style: none"><br>
</li>

<li>"<b>time_created</b>" - The time the item was first
created</li>

<li style="list-style: none"><br>
</li>

<li>"<b>time_updated</b>" - The last time the item was updated</li>

<li style="list-style: none"><br>
</li>

<li>"<b>time_added_to_user_list</b>" - The time that the item was
subscribed to</li>

<li style="list-style: none"><br>
</li>

<li>"<b>visibility</b>" - The visibility of the item (see <a href=
"steam_ugc_set_item_visibility.html"><tt>steam_ugc_set_item_visibility()</tt></a>
for the returned constants)</li>

<li style="list-style: none"><br>
</li>

<li>"<b>banned</b>" - Whether the item has been banned
(<tt>true</tt>) or not (<tt>false</tt>)</li>

<li style="list-style: none"><br>
</li>

<li>"<b>accepted_for_use</b>" - Whether the item has been accepted
for use (<tt>true</tt>) or not (<tt>false</tt>)</li>

<li style="list-style: none"><br>
</li>

<li>"<b>tags_truncated</b>" - Short version of the tags as an
array</li>

<li style="list-style: none"><br>
</li>

<li>"<b>tags</b>" - A string containing the tags for the item, each
one separated by a comma</li>

<li style="list-style: none"><br>
</li>

<li>"<b>handle_file</b>" - The unique file handle for the item</li>

<li style="list-style: none"><br>
</li>

<li>"<b>handle_preview_file</b>" - The unique handle for the image
preview for the item (can be used as an argument with <a href=
"steam_ugc_download.html"><tt>steam_ugc_download()</tt></a> to
download a preview image)</li>

<li style="list-style: none"><br>
</li>

<li>"<b>filename</b>" - The name of the item file</li>

<li style="list-style: none"><br>
</li>

<li>"<b>file_size</b>" - The size of the item file</li>

<li style="list-style: none"><br>
</li>

<li>"<b>preview_file_size</b>" - The size of the preview image</li>

<li style="list-style: none"><br>
</li>

<li>"<b>url</b>" - The full URL for the item</li>

<li style="list-style: none"><br>
</li>

<li>"<b>votes_up</b>" - The number of up-votes received</li>

<li style="list-style: none"><br>
</li>

<li>"<b>votes_down</b>" - The number of down-votes received</li>

<li style="list-style: none"><br>
</li>

<li>"<b>score</b>" - The overall score of the item</li>

<li style="list-style: none"><br>
</li>

<li>"<b>account_id_owner</b>" - The account ID from the Steam ID
owner (this can be used in the function <a href=
"steam_ugc_create_query_user_ex.html"><tt>steam_ugc_create_query_user_ex()</tt></a>)</li>

<li style="list-style: none"><br>
</li>
</ol>
</blockquote>

<p><br>
</p>

<h3 class="studio">Example:</h3>

<p class="code">var query_handle =
steam_ugc_create_query_all(ugc_query_RankedByTrend,
ugc_match_Items, 1);<br>
steam_ugc_query_add_required_tag(query_handle, "RPG");<br>
steam_ugc_query_set_return_long_description(query_handle,
true);<br>
steam_ugc_query_set_allow_cached_response(query_handle, true);<br>
query_ID = steam_ugc_send_query(query_handle);<br></p>

<p>The above code creates a query request and stores it's handle in
a local variable for future use in the rest of the functions which
further define the query request before sending the query.<br></p>

<div class="clear">
<div style="float:left">Back: <a href="index.html">Steam API - User
Generated Content</a></div>

<div style="float:right">Next: <a href=
"steam_ugc_create_item.html">steam_ugc_create_item</a></div>
</div>

<h5>Â© Copyright YoYo Games Ltd. 2018 All Rights Reserved</h5>

<script type="text/JavaScript">
var fe = FindFrame("toc", top);
if ((fe != null) && (chmtop.c2wtopf.jstree != null)) {
  if (chmtop.c2wtopf.FITEMS[chmtop.c2wtopf.pagenum] != chmtop.c2wtopf.pageid)
    chmtop.c2wtopf.jstree.OpenTreeNode("source/" + chmtop.c2wtopf.pageid);
}
</script>
</body>
</html>
